buildscript {
    dependencies {
        classpath 'com.ampznetwork.modsuite:buildscripts'
    }
}

plugins {
    id 'com.ampznetwork.modsuite.buildscripts'
    id 'org.comroid.codegen.spigot' apply false
}

ext {
    debug = "true" == System.getenv("DEBUG")
}

apply from: 'gradle/scripts/versions.gradle'

evaluationDependsOnChildren()

// set up basic library dependencies
subprojects.findAll { it.plugins.hasPlugin('java') }.forEach { p ->
    p.dependencies { d ->
        if (p.name == 'core') d.compileOnly project(":$p.parent.name:api")
        if (p.name == 'spigot') d.compileOnly project(":$p.parent.name:core")
        if (p.name == 'forge') d.compileOnly project(":$p.parent.name:core")
        if (p.name == 'fabric') d.compileOnly project(":$p.parent.name:core")

        for (String sub : new String[]{'api', 'core', 'spigot', 'forge', 'fabric'}) {
            //print ":$p.parent.name:$p.name -> $sub: "
            if (p.parent.name != 'LibMod' && p.name == sub) {
                d.api project(':LibMod:' + sub)
                //println 'yes'
            } //else println 'no'
        }
    }
}
